<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sample</title>
    <link rel="stylesheet" type="text/css" href="chatbox.css?v=5.0" />
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono|Roboto+Slab|Roboto:100,200,300,400,500,700"
        rel="stylesheet" />

</head>

<body>
    <header>
        <div class="logo">
            <img src="images/Connect.png" class="image">
        </div>

        <div class="top">
            <ul class="icons">

                <li class="whitetext"><a href="new.php">HOME</a></li>
                <li class="whitetext"><a href="#">FAQs</a></li>
                <li class="blacktext"><a href="#">ABOUT US</a></li>
                <li class="blacktext"><a href="#">GET STARTED</a></li>

            </ul>

        </div>



    </header>

    <div class="chat_box">
        <div class="name_box">
            <div class="name">
                prashant singh
            </div>
            <div>
                <a href="#new_chat_modal" class="new_chat"><img class="new_icon" src="images/new_message.png"></a>
            </div>


        </div>
        <div class="logout">
            <a href="logout.php" class="logout_button">Log out</a>
        </div>
        <div class="contact_box">

            <div class="contact">
                <img src="images/shield.png" class="contact_profile">
                <br>
                mayank
            </div>

        </div>

        <div class="right_chatbox">
            <div class="messages">
                <div class="sent_message">
                    <a href="#">Me</a>
                    <p>sent message</p>
                </div>
                <div class="recieved_message">
                    <a href="#">user</a>
                    <p>recieved_message</p>
                </div>

                <div class="sent_message">
                    <a href="#">Me</a>
                    <p>sent message</p>
                </div>
                <div class="recieved_message">
                    <a href="#">user</a>
                    <p>recieved_message</p>
                </div>

                <div class="sent_message">
                    <a href="#">Me</a>
                    <p>sent message</p>
                </div>
                <div class="recieved_message">
                    <a href="#">user</a>
                    <p>recieved_message</p>
                </div>

                <div class="sent_message">
                    <a href="#">Me</a>
                    <p>sent message</p>
                </div>
                <div class="recieved_message">
                    <a href="#">user</a>
                    <p>recieved_message</p>

                    <a href="#" onclick="open('#message_box')"
                </div>


            </div>

        </div>
        
            <form method="POST" id="message_form">
                <div class="textbox">
                <textarea class="message_area" placeholder="Write your message" name="my_message"></textarea>
                <input type="submit" value="send" id="send" name="send" class="send" style="position: absolute; transform: translate(-50%,-50%); left: 50%; top: 140%;">
            </div>

            </form>

       

    </div>
    <div id="new_chat_modal" class="new_chat_modal_class">
        <a href="#">&times;</a>
        <form method="POST" class="new_chat_form">
            <input type="text" placeholder="Username" size="80" class="newchatusername" name="User_name" id="user"
                onkeyup="check_in_db()" list="user" id="user_name"><br><br>
            <!-- data list -->
            <datalist id="user"></datalist>




            <textarea class="newchattextarea" placeholder="Write your message"></textarea><br><br>
            <div class="sendcancel">
                <input type="submit" value="Send" class="send" id="send">
            </div>

        </form>


    </div>
    <script src="jquery.js"></script>
    <script>
        function check_in_db() {
            var username = document.getElementById("user_name").value;
            $post("check_in_db.php",
                {
                    user: username
                }
            function (data, status) {
                    // alert(data) ;
                    if (data == '<option value = "no user" >') {
                        document.getElementById("send").disabled = true;
                    }
                    document.getElementById('user').innerHTML = data;
                }
            );

        }
    </script>

    <script src="jquery.js"></script>

    <script>

        $("document").ready(function (event) {

            $("#right_chatbox").on('submit', '#message_form', function () {
                var my_message = $("#my_message").val();
                $.post("sending_process.php?user=<?php echo $_GET['user']; ?>",
                    {
                        text: my_message,
                    },
                    function (data, status) {
                        alert(data);

                        $("#my_message").val("");

                        document.getElementById("messages").innerHTML += data;
                    }
                );
            });



            //if any button is click inside right col container

            $("#right_chatbox").keypress(function (e) {

                if (e.keyCode == 13 && !e.shiftKey) {
                    $("#message_form").submit();
                }


            });



        });
    </script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        $('#messages_box').load("messages.php");
        setInterval(function(){
            $('#messages_box').load("messages.php");
        },1000)
    })
</script>

</body>

</html>




<?php

require_once("contact.php");

?>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        
        $('#messages_box').load("messages.php");
        setInterval(function(){
            $('#messages_box').load("messages.php");
        },1000)
    })
</script>